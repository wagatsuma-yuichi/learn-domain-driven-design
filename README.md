# クリーンアーキテクチャを使用した注文管理システム

このプロジェクトは、ドメイン駆動設計（DDD）とクリーンアーキテクチャを使用して実装された注文管理システムです。バックエンドにはFastAPIを使用しています。

## アーキテクチャ概要

このシステムは以下のレイヤーに分かれています：

### ドメインレイヤー
- **エンティティ**: ビジネスルールとロジックを含むオブジェクト（注文、顧客、製品）
- **リポジトリインターフェース**: データアクセスの抽象化

### アプリケーションレイヤー
- **ユースケース**: アプリケーション固有のビジネスルールを実装
- **入出力境界**: 外部との通信のためのインターフェース

### インフラストラクチャレイヤー
- **リポジトリ実装**: データアクセスの具体的な実装
- **データベース接続**: 実際のデータベースとのやり取り

### プレゼンテーションレイヤー
- **コントローラー**: 外部からの入力を処理
- **プレゼンター**: 出力データの整形
- **ビューモデル**: 表示用データの構造

## ディレクトリ構造

```
app/
├── domain/
│   ├── entities/          # エンティティ
│   └── repositories/      # リポジトリインターフェース
├── application/
│   ├── interfaces/        # 入出力境界
│   └── usecases/          # ユースケース
├── infrastructure/
│   ├── db/                # データベース関連
│   └── repositories/      # リポジトリ実装
├── presentation/
│   ├── controllers/       # コントローラー
│   ├── presenters/        # プレゼンター
│   └── viewmodels/        # ビューモデル
└── api/                   # API定義
```

## 設計原則

このプロジェクトは以下の設計原則に従っています：

1. **依存関係の方向**: 内側のレイヤーは外側のレイヤーについて知りません
2. **依存性の注入**: 具体的な実装は抽象に依存します
3. **境界の明確化**: レイヤー間のインターフェースが明確に定義されています

## 実行方法

```bash
# 依存関係のインストール
pip install -r requirements.txt

# アプリケーションの実行
python main.py
```

アプリケーションは次のURLで実行されます：http://localhost:8000

APIドキュメントは次のURLで確認できます：http://localhost:8000/docs または http://localhost:8000/redoc

## API エンドポイント

- `POST /api/orders`: 新しい注文を作成
- `GET /api/orders/{order_id}`: 特定の注文を取得
- `GET /api/customers/{customer_id}/orders`: 顧客の全注文を取得
- `PUT /api/orders/{order_id}/status`: 注文ステータスを更新
- `PUT /api/orders/{order_id}/cancel`: 注文をキャンセル」 